webpackJsonp([15],{220:function(t,e,i){function s(t){i(543),i(544)}var n=i(5)(i(365),i(687),s,"data-v-b57d0b1e",null);t.exports=n.exports},312:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(16),n=i.n(s),r=i(15),a=i.n(r);e.default={props:{item:{}},data:function(){return{}},methods:{empty:function(){},skip:function(t){var e=this;return a()(n.a.mark(function i(){var s,r,a;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s=parseInt(t.sort),!(isNaN(s)||s<0)){i.next=4;break}return e.$Message.error("序号输入有误"),i.abrupt("return");case 4:return i.next=6,e.http("/productApi/modifyProductSort",{data:{id:t.pid,sort:s},method:"POST"});case 6:r=i.sent,a=r.data,a.code?e.$Message.error(a.msg.zh):(e.$Message.info(a.msg.zh),e.$parent.getProductList());case 9:case"end":return i.stop()}},i,e)}))()},goDetail:function(){this.$router.push({name:"产品详细",params:{productId:this.item.pid}})},productDel:function(t){var e=this;this.$Modal.confirm({title:"提示框",content:"<p>确认删除本产品吗？</p>",loading:!0,onOk:function(){var i=a()(n.a.mark(function i(){var s,r;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.http("/productApi/productDel",{data:{ids:[t]},method:"POST"});case 2:s=i.sent,r=s.data,r.code||(e.$Modal.remove(),e.$parent.getProductList()),e.$Message.info(r.msg.zh);case 6:case"end":return i.stop()}},i,e)}));return function(){return i.apply(this,arguments)}}()})}}}},365:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(16),n=i.n(s),r=i(15),a=i.n(r),o=i(84),c=i.n(o),p=i(570),u=i.n(p);e.default={data:function(){return{items:{product:[],paginate:{cur_page:1,page_size:40}},cates:[],height:0,products:{}}},components:{Item:u.a},methods:{goSelect:function(){this.$store.commit("IMAGE_CLEAR"),this.go({path:"/image/list/select?from=product"})},pageSizeChange:function(t){this.items.paginate.cur_page=1,this.items.paginate.page_size=t,this.getProductList()},getPage:function(t){this.items.paginate.cur_page=t,this.getProductList()},format:function(t){if(this.products={},t.length){var e=!0,i=!1,s=void 0;try{for(var n,r=c()(t);!(e=(n=r.next()).done);e=!0){var a=n.value;this.products["c"+a.category_id]?this.products["c"+a.category_id].items.push(a):this.products["c"+a.category_id]={category_id:a.category_id,category:a.category_title,items:[a]}}}catch(t){i=!0,s=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw s}}}},getProductList:function(){var t=this;return a()(n.a.mark(function e(){var i,s,r,a,o,p,u,l,d;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.$route.params.lineId){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.http("/productApi/getProductCatInfo",{data:{id:i,cur_page:t.items.paginate.cur_page,page_size:t.items.paginate.page_size},method:"POST"});case 5:for(s=e.sent,r=s.data,r.result.paginate.cur_page=parseInt(r.result.paginate.cur_page),r.result.paginate.page_size=t.items.paginate.page_size,a=!0,o=!1,p=void 0,e.prev=12,u=c()(r.result.product);!(a=(l=u.next()).done);a=!0)d=l.value,d.skip=1;e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),o=!0,p=e.t0;case 20:e.prev=20,e.prev=21,!a&&u.return&&u.return();case 23:if(e.prev=23,!o){e.next=26;break}throw p;case 26:return e.finish(23);case 27:return e.finish(20);case 28:t.items=r.result,i||t.format(t.items.product);case 30:case"end":return e.stop()}},e,t,[[12,16,20,28],[21,,23,27]])}))()},refreshHeight:function(){var t=$(this.$el).width()/2-20;this.height=t/3*2},toSeri:function(t){if(t.children&&t.children.length>0){var e=t.children[0].id;this.$router.push({name:"产品系列详细",params:{lineId:e,cate:t.id}})}}},mounted:function(){var t=this;this.$bus.on("cates",function(e){t.cates=e}),this.refreshHeight()},destroyed:function(){this.$bus.off("cates")},created:function(){this.getProductList()},watch:{$route:"getProductList"}}},458:function(t,e,i){e=t.exports=i(202)(!0),e.push([t.i,".product-list-sortable li[data-v-b57d0b1e]{height:280px!important}","",{version:3,sources:["/Users/ouchuanyu/work/repo/zhuangbei/zbqd/src/pages/product/ProductList.vue"],names:[],mappings:"AACA,2CACC,sBAAwB,CACxB",file:"ProductList.vue",sourcesContent:["\n.product-list-sortable li[data-v-b57d0b1e] {\n\theight: 280px!important;\n}\n"],sourceRoot:""}])},459:function(t,e,i){e=t.exports=i(202)(!0),e.push([t.i,".sum-list[data-v-b57d0b1e]{-ms-flex-wrap:wrap;flex-wrap:wrap}.sum-wrapper[data-v-b57d0b1e]{width:50%;padding:10px}.sum[data-v-b57d0b1e]{background-color:#b7b7b7;position:relative;cursor:pointer}.sum[data-v-b57d0b1e],.sum img[data-v-b57d0b1e]{width:100%;height:100%;border-radius:6px}.sum-title[data-v-b57d0b1e]{position:absolute;left:0;top:0;display:inline-block;font-size:14px;color:#fff;margin:10px}","",{version:3,sources:["/Users/ouchuanyu/work/repo/zhuangbei/zbqd/src/pages/product/ProductList.vue"],names:[],mappings:"AACA,2BACI,mBAAmB,AACf,cAAe,CACtB,AACD,8BACI,UAAU,AACV,YAAa,CAChB,AACD,sBACI,yBAAyB,AACzB,kBAAkB,AAClB,cAAe,CAClB,AACD,gDACI,WAAW,AACX,YAAY,AACZ,iBAAkB,CACrB,AACD,4BACI,kBAAkB,AAClB,OAAS,AACT,MAAQ,AACR,qBAAqB,AACrB,eAAe,AACf,WAAW,AACX,WAAY,CACf",file:"ProductList.vue",sourcesContent:["\n.sum-list[data-v-b57d0b1e]{\n    -ms-flex-wrap:wrap;\n        flex-wrap:wrap;\n}\n.sum-wrapper[data-v-b57d0b1e]{\n    width:50%;\n    padding:10px;\n}\n.sum[data-v-b57d0b1e]{\n    background-color:#b7b7b7;\n    position:relative;\n    cursor:pointer;\n}\n.sum[data-v-b57d0b1e], .sum img[data-v-b57d0b1e]{\n    width:100%;\n    height:100%;\n    border-radius:6px;\n}\n.sum-title[data-v-b57d0b1e]{\n    position:absolute;\n    left:0px;\n    top:0px;\n    display:inline-block;\n    font-size:14px;\n    color:#fff;\n    margin:10px;\n}\n"],sourceRoot:""}])},467:function(t,e,i){e=t.exports=i(202)(!0),e.push([t.i,".sorts{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row;flex-flow:row;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.skip-input input{text-align:center}","",{version:3,sources:["/Users/ouchuanyu/work/repo/zhuangbei/zbqd/src/components/product/item.vue"],names:[],mappings:"AACA,OACI,8BAA8B,AAC9B,6BAA6B,AACzB,kBAAkB,AACd,cAAc,AACtB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,qBAAqB,AACjB,kBAAkB,AACd,wBAAyB,CACpC,AACD,kBACI,iBAAkB,CACrB",file:"item.vue",sourcesContent:["\n.sorts{\n    -webkit-box-orient:horizontal;\n    -webkit-box-direction:normal;\n        -ms-flex-flow:row;\n            flex-flow:row;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack:end;\n        -ms-flex-pack:end;\n            justify-content:flex-end;\n}\n.skip-input input{\n    text-align:center;\n}\n"],sourceRoot:""}])},543:function(t,e,i){var s=i(458);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(203)("e60b97ca",s,!0,{})},544:function(t,e,i){var s=i(459);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(203)("c49ffe48",s,!0,{})},552:function(t,e,i){var s=i(467);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(203)("435e7f5a",s,!0,{})},570:function(t,e,i){function s(t){i(552)}var n=i(5)(i(312),i(695),s,null,null);t.exports=n.exports},687:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.$route.params.lineId?i("ul",{staticClass:"product-list product-list-sortable flex"},[t._l(t.items.product,function(t,e){return i("item",{key:e,attrs:{item:t}})}),t._v(" "),t.$store.state.product.line_id?i("li",{staticClass:"flex center cursor",on:{click:function(e){t.goSelect()}}},[i("div",[i("Icon",{attrs:{type:"plus",size:"32"}})],1)]):t._e()],2):i("div",[i("div",{staticClass:"flex sum-list"},t._l(t.cates,function(e,s){return i("div",{staticClass:"sum-wrapper"},[i("div",{staticClass:"sum",style:{height:t.height+"px"},on:{click:function(i){t.toSeri(e)}}},[e.img_url?i("img",{attrs:{src:t.server+e.img_url}}):t._e(),t._v(" "),i("span",{staticClass:"sum-title"},[t._v(t._s(e.title))])])])}))]),t._v(" "),t.$route.params.lineId?i("div",{staticStyle:{position:"fixed",bottom:"20px",right:"300px"}},[i("Page",{attrs:{total:t.items.paginate.total_record,"show-total":"",placement:"top","page-size":t.items.paginate.page_size,"page-size-opts":[10,20,30,40],current:t.items.paginate.cur_page,size:"small","show-elevator":"","show-sizer":""},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.getPage}})],1):t._e()])},staticRenderFns:[]}},695:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"cursor"},[t.item.attr.attr_pic.length?i("div",{staticClass:"img-box",style:"background-image:url("+t.server+t.item.attr.attr_pic[0].url+")",on:{click:t.goDetail}}):t._e(),t._v(" "),i("div",{staticClass:"flex space-between p-t-10",on:{click:t.goDetail}},[i("span",[t._v(t._s(t.item.product_title))])]),t._v(" "),i("div",{staticClass:"flex space-between p-t-5 info",staticStyle:{cursor:"default"}},[t.item.attr.attr_pic.length?i("span",[t._v("¥"+t._s(t.item.attr.attr_pic[0].price))]):t._e(),t._v(" "),i("div",{staticClass:"info-handler"},[i("span",{staticClass:"cursor",on:{click:function(e){e.stopPropagation(),t.productFavorite(t.item.pid)}}},[i("Icon",{attrs:{type:"android-favorite-outline",size:"14"}})],1),t._v(" "),i("span",{staticClass:"cursor",on:{click:function(e){e.stopPropagation(),t.productBuy(t.item.pid)}}},[i("Icon",{attrs:{type:"ios-cart",size:"14"}})],1),t._v(" "),i("span",{staticClass:"cursor",on:{click:function(e){e.stopPropagation(),t.productDel(t.item.pid)}}},[i("Icon",{attrs:{type:"ios-trash",size:"14"}})],1)])]),t._v(" "),i("div",{staticClass:"flex space-between p-t-5 info",staticStyle:{cursor:"default"}},[i("div"),t._v(" "),i("div",{staticClass:"info-handler sorts"},[i("span",{on:{click:function(e){return e.stopPropagation(),t.empty(e)}}},[i("Input",{staticClass:"skip-input",staticStyle:{width:"50px","text-align":"center"},attrs:{size:"small"},on:{"on-enter":function(e){t.skip(t.item)}},model:{value:t.item.sort,callback:function(e){t.$set(t.item,"sort",e)},expression:"item.sort"}})],1),t._v(" "),i("Button",{staticStyle:{width:"24px","text-align":"center"},attrs:{type:"ghost",icon:"arrow-swap",size:"small"},on:{click:function(e){e.stopPropagation(),t.skip(t.item)}}})],1)])])},staticRenderFns:[]}}});
//# sourceMappingURL=15.0555928867c0c76ea80e.js.map