webpackJsonp([1],{NHnr:function(n,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=i("MVMM"),o=i("HzJ8"),r=i.n(o);t.a.filter("img",function(n){return n?""+n:null});var a={name:"App",data:function(){return{id:null,token:null,video:null,api:"https://fitment.chenyoujiu.com"}},mounted:function(){var n=this.findParams();this.id=n.id,this.token=n.token,this.id&&(this.load(),this.loadWXCfg())},methods:{findParams:function(){var n={},e=window.location.search;if(e){var i=(e=e.substring(1)).split("&"),t=!0,o=!1,a=void 0;try{for(var s,c=r()(i);!(t=(s=c.next()).done);t=!0){var l=s.value.split("=");n[l[0]]=l[1]}}catch(n){o=!0,a=n}finally{try{!t&&c.return&&c.return()}finally{if(o)throw a}}}return n},load:function(){var n=this;$.post("https://fitment.chenyoujiu.com/videoApi/getVideoInfo",{vid:this.id,token:this.token},function(e){e.code||(n.video=e.result.data,n.loaded=!0,n.initShare(),document.title=n.video.title||"视频")})},loadWXCfg:function(){var n=this;$.post("/wxApi/shareConfig",null,function(e){var i=e.result[0];wx.config({appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]});var t=n;wx.ready(function(){t.wxCfged=!0,t.initShare()}),wx.error(function(n){console.log(n)})})},render:function(n){document.title=n.title},initShare:function(){if(this.loaded&&this.wxCfged){var n=window.location.href.replace(/#\S*/,""),e=this.video.title,i=this.video.share_content||"新款发布",t=window.location.origin+(this.video.share_icon||"/static/albums/album-icon.png");wx.onMenuShareTimeline({title:i,link:n,imgUrl:t,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e,desc:i,link:n,imgUrl:t,type:"link",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e,desc:i,link:n,imgUrl:t,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:e,desc:i,link:n,imgUrl:t,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:e,desc:i,link:n,imgUrl:t,success:function(){},cancel:function(){}})}}}},s={render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",{attrs:{id:"app"}},[this.video?e("video",{staticClass:"video",attrs:{src:this.api+this.video.url,controls:"controls"}}):this._e()])},staticRenderFns:[]};var c=i("Z0/y")(a,s,!1,function(n){i("oLO9")},null,null).exports;t.a.config.productionTip=!1,new t.a({el:"#app",components:{App:c},template:"<App/>"})},oLO9:function(n,e){}},["NHnr"]);
//# sourceMappingURL=app.c010897dae29553ab04c.js.map