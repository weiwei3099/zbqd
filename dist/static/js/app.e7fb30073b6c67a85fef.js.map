{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?8192","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["document","addEventListener","play","server","vue_esm","filter","img","App","_ref","getTime","defineProperty_default","findParams","id","width","height","load","loadWXCfg","autoClose","search","_iteratorNormalCompletion","_step","value","params","_this","this","resp","album","initShare","resize","_this2","that","res","_this3","title","pic","_step2","thumbnail","url","initTurn","ct","thumbnail_height","thumbnail_width","h","calSize","display","w","start","menu","page","timer","_this4","stop","nextPage","share_icon","_this5","stopTimer","lastopt","autoTimer","watch","length","pause","turnPlay","selectortype_template_index_0_src_App","render","_vm","_h","$createElement","_c","_self","attrs","on","click","$event","markLastOpt","directives","name","rawName","expression","staticClass","src","_f","producer","icon","_v","close_ad","_s","username","phone","style","background-image","background","ref","menuVisible","_l","index","toPage","_e","class","active","pageSwitch","bgSwitch","toggle","num","total","staticStyle","music","autoplay","loop","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","config","productionTip","el","components","template"],"mappings":"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","file":"static/js/app.e7fb30073b6c67a85fef.js","sourcesContent":["<template>\n<div id=\"app\" @click=\"markLastOpt()\">\n    <!--顶部广告条-->\n    <div class=\"flex-row tbar\" v-show=\"menuVisible\">\n        <img :src=\"album.producer.icon | img\"/>\n        <span v-show=\"album.close_ad != '1'\">{{album.producer.username}}</span>\n        <span v-show=\"album.close_ad != '1'\">{{album.producer.phone}}</span>\n    </div>\n\n    <!--book容器-->\n    <div class=\"content\" :style=\"{'background-image':'url('+album.background+')'}\" v-show=\"loaded\">\n        <div ref=\"ct\" @click=\"menuVisible = !menuVisible\">\n            <div v-for=\"pic of album.pic\" class=\"pic\" :style=\"{'background-image':'url('+pic.url+')'}\">\n\n            </div>\n        </div>\n    </div>\n\n    <!--页面列表-->\n    <div class=\"list menu\" v-if=\"menu === 'list'\">\n        <div class=\"list-cont\">\n            <div v-for=\"(pic, index) of album.pic\" class=\"list-item\" @click=\"toPage(index, pic, true)\">\n                <img :src=\"pic.thumbnail\"/>\n                <div class=\"page-txt\">\n                    {{index + 1}}\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!--翻页和背景开关-->\n    <div class=\"xtoggle menu menu-bar\" v-if=\"menu === 'music'\">\n        <div class=\"check-group\">翻页开关<span class=\"xcheck\" :class=\"{'active':pageSwitch}\" @click=\"pageSwitch = !pageSwitch\"></span></div>\n        <div class=\"check-group\">背景开关<span class=\"xcheck\" :class=\"{'active':bgSwitch}\" @click=\"bgSwitch = !bgSwitch\"></span></div>\n    </div>\n\n    <!--分页条-->\n    <div class=\"xpage menu menu-bar\" v-if=\"menu === 'page'\">\n        <div class=\"xpage-icon first\" @click=\"toPage(0)\"></div>\n        <div class=\"xpage-icon pre\" @click=\"toggle(-1)\"></div>\n        <div class=\"xpage-txt\"><span>{{num}}</span><span>/</span><span>{{total}}</span></div>\n        <div class=\"xpage-icon next\" @click=\"toggle(1)\"></div>\n        <div class=\"xpage-icon last\" @click=\"toPage(total - 1)\"></div>\n    </div>\n\n    <!--底部按钮条-->\n    <div class=\"flex-row bbar\" v-show=\"menuVisible\">\n        <div class=\"bbar-btn\" @click=\"active('list')\">\n            <div class=\"icon icon-list\" :class=\"{active: menu === 'list'}\"></div>\n        </div>\n        <div class=\"bbar-btn\" @click=\"active('page')\">\n            <div class=\"icon icon-page\" :class=\"{active: menu === 'page'}\"></div>\n        </div>\n        <div class=\"bbar-btn\" @click=\"active('music')\">\n            <div class=\"icon icon-music\" :class=\"{active: menu === 'music'}\"></div>\n        </div>\n        <div class=\"bbar-btn\" @click=\"play = !play\">\n            <div class=\"icon icon-play\" :class=\"{active: play}\"></div>\n        </div>\n    </div>\n\n    <div style=\"display:none;\">\n        <audio :src=\"album.music\" autoplay=\"true\" loop=\"true\" id=\"audio\"></audio>\n        <audio src=\"/static/albums/fy.mp3\" id=\"fy\"></audio>\n    </div>\n</div>\n</template>\n\n<script>\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    function audioAutoPlay() {\n        var bg = document.getElementById('audio');\n\n        document.addEventListener(\"WeixinJSBridgeReady\", function () {\n            bg.play();\n        }, false);\n    }\n\n    audioAutoPlay();\n});\n\n\nimport Vue from 'vue';\nconst server = `${process.env.URL_PRE}`;\nVue.filter('img', function(img){\n    if(!img){\n        return null;\n    }\n    return server + img;\n})\n\nexport default {\n\tname: 'App',\n\n    data(){\n        return {\n            lastopt : new Date().getTime(),\n            id: null,\n            width: null,\n            height: null,\n            loaded: false,\n            num: 0,\n            total: 0,\n            play: false,\n            menu: null,\n\n            menuVisible: true,\n            wxCfged: false,\n            loaded: false,\n\n            pageSwitch: true, // 翻页开关\n            bgSwitch: true, // 背景开关\n\n            album: {\n                background: '',\n                title: '',\n                music: '',\n                share_content: '',\n                share_icon: '',\n                close_share: '',\n                close_ad: '',\n                pic: [],\n                producer: {\n                    username: '',\n                    icon: '',\n                    phone: ''\n                }\n            }\n        }\n    },\n    mounted(){\n        const params = this.findParams();\n        this.id = params.id;\n        this.width = Number(params.width);\n        this.height = Number(params.height);\n\n        if(!this.id){\n            return ;\n        }\n        try{\n            document.getElementById('fy').load();\n        }catch(e){}\n        this.load();\n        this.loadWXCfg();\n        this.autoClose();\n    },\n\n    methods: {\n        markLastOpt(){\n            this.lastopt = new Date().getTime();\n            console.log('mark...');\n        },\n\n        findParams(){\n            const params = {};\n            let search = window.location.search;\n            if(search){\n                search = search.substring(1);\n                const paramPair = search.split('&');\n\n                for(let str of paramPair){\n                    const pair = str.split('=');\n                    params[pair[0]] = pair[1];\n                }\n            }\n            return params;\n        },\n\n        // 加载数据\n        load(){\n            $.post('/picApi/factoryAlbumInfo', {\n                id: this.id\n            }, (resp)=>{\n                if(!resp.code){\n                    this.render(resp.result.album);\n                    this.loaded = true;\n                    this.initShare();\n\n                    this.$nextTick(()=>{\n                        document.getElementById('audio').play();\n\n                        $(window).on('touchstart', ()=>{\n                            if(this.bgSwitch){\n                                document.getElementById('audio').play();\n                            }\n\n                            if(this.pageSwitch){\n                                document.getElementById('fy').load();\n                            }\n                        });\n                    });\n\n                    window.onorientationchange = ()=>{\n                        // alert($(window).width());\n                        // const pic = album.pic;\n                        // album.pic = [];\n                        // $.$nextTick(()=>{\n                        //     album.pic = album.pic;\n                        //     $.$nextTick(()=>{\n                        //         this.initTurn();\n                        //     });\n                        // });\n\n                        setTimeout(()=>{\n                            this.resize();\n                        }, 500);\n\n\n                    };\n                }\n            });\n        },\n\n        loadWXCfg: function(){\n            ///wxApi/shareConfig\n            $.post('/wxApi/shareConfig', null, (resp)=>{\n                const result = resp.result[0];\n                wx.config({\n                    // debug: true,\n                    appId: result['appId'],\n                    timestamp: result['timestamp'],\n                    nonceStr: result['nonceStr'],\n                    signature: result['signature'],\n                    jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']\n                });\n                const that = this;\n                wx.ready(()=>{\n                    that.wxCfged = true;\n                    that.initShare();\n                });\n                wx.error(function(res){\n                    console.log(res);\n                })\n            });\n        },\n\n        // 渲染\n        render(album){\n            document.title = album.title;\n            if(!album.background){\n                album.background = '/static/albums/album-bg.png';\n            }\n            if(!album.share_icon){\n                album.share_icon = '/static/albums/album-icon.png';\n            }\n            if(!album.share_content){\n                album.share_content = '新款画册发布';\n            }\n            if(!album.music){\n                album.music = '/static/albums/bg.mp3';\n            }\n\n            for(let pic of album.pic){\n                pic.thumbnail = server + pic.thumbnail;\n                pic.url = server + pic.url;\n            }\n            this.album = album;\n            this.loaded = true;\n\n            this.$nextTick(()=>{\n                this.initTurn();\n            });\n\n        },\n\n\n\n        calSize(){\n            const el = $($(this.$refs.ct));\n            const body = $(window);//$(document.body);\n            const thuH = this.album.pic[0].thumbnail_height;\n            const thuW = this.album.pic[0].thumbnail_width;\n\n            let bodyW = body.width() - 10;\n            let bodyH = body.height();\n            let display = null;\n            let w = null;\n            let h = null;\n\n            // 打横模式\n            if(bodyW > bodyH){\n                display = 'double';\n                w = bodyW - 20;\n                h = thuH/thuW*w/2;\n\n                if(h > bodyH){\n                    h = bodyH - 20;\n                    w = thuW/thuH*h*2;\n                }\n            }else{\n                display = 'single';\n                w = bodyW - 10;\n                h = thuH/thuW*w;\n\n                if(h > bodyH){\n                    h = bodyH - 10;\n                    w = thuW/thuH*h;\n                }\n            }\n\n            return {display, w, h};\n        },\n\n        resize(){\n            const size = this.calSize();\n            const el = $(this.$refs.ct);\n            el.turn('size', size.w, size.h);\n            el.turn('display', size.display);\n            el.turn('resize');\n        },\n\n        initTurn(){\n            const size = this.calSize();\n\n            const that = this;\n            $(this.$refs.ct).turn({\n                width: size.w,\n                height: size.h,\n                display: size.display,\n                autoCenter: true,\n                when: {\n                    turning(){\n                        if(that.pageSwitch){\n                            var audio = document.getElementById('fy');\n                            audio.load();\n                            audio.play();\n                        }\n                    }\n                }\n            });\n            if(this.play){\n                this.start();\n            }\n        },\n\n        active(menu){\n            if(this.menu === menu){\n                this.menu = null;\n            }else{\n                this.menu = menu;\n            }\n        },\n\n        toPage(index, pic, hide){\n            if(index < 0 || index >= this.album.pic.length){\n                return ;\n            }\n            const page = index + 1;\n            if(hide){\n                this.menu = null;\n            }\n            $(this.$refs.ct).turn('page', page);\n            this.num = page;\n        },\n\n        toggle(add){\n            this.toPage($(this.$refs.ct).turn('page') + add - 1);\n        },\n\n        stop(){\n            if(this.timer){\n                clearInterval(this.timer);\n            }\n            this.timer = null;\n        },\n\n        start(){\n            this.stop();\n            this.timer = setInterval(()=>{\n                this.nextPage();\n            }, 3000);\n        },\n\n        nextPage(){\n            let page = $(this.$refs.ct).turn('page');\n            if(page >= this.album.pic.length){\n                page = 1;\n            }else{\n                page++;\n            }\n\n            this.toPage(page - 1);\n        },\n\n        turnPlay(){\n            if(this.play){\n                this.nextPage();\n                this.start();\n            }else{\n                this.stop();\n            }\n        },\n\n        initShare(){\n            if(!this.loaded || !this.wxCfged){\n                return ;\n            }\n            console.log('init share');\n            const link = window.location.href.replace(/#\\S*/,\"\");\n            const title = this.album.title;\n            const desc = this.album.share_content || title;\n            const imgUrl = window.location.origin + this.album.share_icon;\n            // 分享到朋友圈\n            wx.onMenuShareTimeline({\n                title: desc, // 分享标题\n                link: link, // 分享链接\n                imgUrl: imgUrl, // 分享图标\n                success: function () {\n                },\n                cancel: function () {}\n            });\n\n            // 分享给朋友\n            wx.onMenuShareAppMessage({\n                title: title, // 分享标题\n                desc: desc, // 分享描述\n                link: link, // 分享链接，该链接域名必须与当前企业的可信域名一致\n                imgUrl: imgUrl, // 分享图标\n                type: 'link', // 分享类型,music、video或link，不填默认为link\n                success: function () {\n\n                },\n                cancel: function () {\n\n                }\n            });\n\n            wx.onMenuShareQQ({\n                title: title, // 分享标题\n                desc: desc, // 分享描述\n                link: link, // 分享链接\n                imgUrl: imgUrl, // 分享图标\n                success: function () {\n                },\n                cancel: function () { }\n            });\n\n            wx.onMenuShareWeibo({\n                title: title, // 分享标题\n                desc: desc, // 分享描述\n                link: link, // 分享链接\n                imgUrl: imgUrl, // 分享图标\n                success: function () {\n                },\n                cancel: function () { }\n            });\n\n            wx.onMenuShareQZone({\n                title: title, // 分享标题\n                desc: desc, // 分享描述\n                link: link, // 分享链接\n                imgUrl: imgUrl, // 分享图标\n                success: function () {\n                },\n                cancel: function () { }\n            });\n        },\n\n        autoClose(){\n            this.stopTimer();\n            this.autoTimer = setInterval(()=>{\n                const idle = new Date().getTime() - this.lastopt;\n\n                if(idle >= 3000 && !this.menu){\n                    this.menuVisible = false;\n                }\n            }, 1500);\n        },\n\n        stopTimer(){\n            if(this.autoTimer){\n                clearInterval(this.autoTimer);\n                this.autoTimer = null;\n            }\n        }\n\n    },\n\n    watch: {\n        menu(val){\n            if(val === 'page'){\n                this.num = $(this.$refs.ct).turn('page');\n                this.total = this.album.pic.length;\n            }\n        },\n\n        bgSwitch(val){\n            if(!this.album.music){\n                return;\n            }\n\n            var audio = document.getElementById('audio');\n            if(val){\n                audio.play();\n            }else{\n                audio.pause();\n            }\n        },\n\n        play(){\n            this.turnPlay();\n        },\n\n        menuVisible(){\n            if(!this.menuVisible){\n                this.menu = null;\n            }\n        },\n\n        menuVisible(){\n            if(this.menuVisible){\n                this.autoClose();\n            }else{\n                this.stopTimer();\n            }\n        }\n\n    }\n}\n</script>\n\n<style>\nhtml,body,#app{\n    width:100%;\n    height:100%;\n    padding:0;\n    margin:0;\n    overflow:hidden;\n}\n#app{\n    position:fixed;\n    top:0;\n    left:0;\n    right:0;\n    bottom:0;\n}\n\n.content{\n    overflow:hidden;\n    width:100%;\n    height:100%;\n    background-repeat:no-repeat;\n    background-size:100% 100%;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    z-index:100;\n}\n.flex-row, .flex-col{\n    display:flex;\n    align-items:center;\n}\n\n.flex-row{\n    flex-direction:row;\n}\n\n.flex-col{\n    flex-direction:column;\n}\n\n.tbar, .bbar{\n    position:fixed;\n    left:0;\n    width:100%;\n    z-index:99999;\n}\n\n.tbar{\n    top:0;\n}\n.bbar{\n    bottom:0;\n}\n\n.tbar{\n    justify-content:flex-end;\n    height:20px;\n    background-color:rgba(42, 42, 42, 0.8);\n    font-size:12px;\n    line-height:12px;\n    color:#979A9C;\n}\n\n.tbar > *{\n    margin-right:18px;\n}\n\n.tbar img{\n    width:12px;\n    height:12px;\n    border-radius:7px;\n}\n\n\n.pic{\n    background-repeat:no-repeat;\n    background-position:center;\n    background-size:contain;\n    width:100%;\n    height:100%;\n    background-color:rgba(255,255,255,0.5);\n}\n\n.bbar{\n    height:44px;\n    justify-content:space-around;\n    background-color:rgba(42, 42, 42, 0.9);\n}\n\n\n.bbar-btn{\n    padding-top:10px;\n    padding-bottom:14px;\n    padding-left:14px;\n    padding-right:14px;\n}\n\n.icon{\n    width:20px;\n    height:20px;\n    background-repeat:no-repeat;\n    background-size:100% 100%;\n}\n\n.icon-list{\n    background-image:url('/static/albums/album-rect.png?v1');\n}\n.icon-list.active{\n    background-image:url('/static/albums/album-rect-on.png?v1');\n}\n.icon-page{\n    background-image:url('/static/albums/album-lr.png?v1');\n}\n.icon-page.active{\n    background-image:url('/static/albums/album-lr-on.png?v1');\n}\n.icon-music{\n    background-image:url('/static/albums/album-music.png?v1');\n}\n.icon-music.active{\n    background-image:url('/static/albums/album-music-on.png?v1');\n}\n.icon-play{\n    background-image:url('/static/albums/album-play.png?v1');\n}\n.icon-play.active{\n    background-image:url('/static/albums/album-stop.png?v1');\n}\n\n.list{\n    top:0;\n    display:flex;\n    flex-flow:column;\n    justify-content:flex-end;\n    overflow-y:auto;\n    -webkit-overflow-scrolling: touch;\n}\n\n.menu{\n    position:fixed;\n    left:0;\n    bottom:44px;\n    width:100%;\n    background:rgba(42, 42, 42, 0.9);\n    z-index:999999;\n}\n\n.list-cont{\n    display:flex;\n    flex-direction:row;\n    justify-content:space-around;\n    flex-wrap:wrap;\n    align-items:center;\n    -webkit-overflow-scrolling:touch;\n}\n\n.list-item{\n    padding:20px 23px;\n}\n\n.list-item img{\n    width:46px;\n}\n\n.menu-bar{\n    height:56px;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n}\n\n.xpage-txt, .xpage-icon{\n    height:30px;\n    line-height:30px;\n}\n\n.xpage-txt{\n    background:#fff;\n    padding:0 6px;\n}\n\n.xpage-txt > span{\n    padding:0 6px;\n}\n\n.page-txt{\n    text-align:center;\n    color:#fff;\n}\n\n.xpage-icon{\n    background-repeat:no-repeat;\n    background-size:100% 100%;\n    width:30px;\n}\n\n.xpage-icon.first{\n    background-image:url(\"/static/albums/album-first.png?v1\");\n}\n.xpage-icon.pre{\n    background-image:url(\"/static/albums/album-pre.png?v1\");\n}\n.xpage-icon.next{\n    background-image:url(\"/static/albums/album-next.png?v1\");\n}\n.xpage-icon.last{\n    background-image:url(\"/static/albums/album-last.png?v1\");\n}\n\n.xpage > *{\n    margin:0 10px;\n    border:1px solid #727277;\n}\n\n.menu-bar input{\n    display:inline-block;\n    width:20px;\n    height:20px;\n}\n\n.xcheck{\n    margin-left:5px;\n    margin-right:30px;\n    display:inline-block;\n    width:20px;\n    height:20px;\n    background-size:100% 100%;\n    background-image:url(\"/static/albums/album-check-empty.png?v1\");\n}\n\n.xcheck.active{\n    background-image:url(\"/static/albums/album-check-ok.png?v1\");\n}\n\n.xtoggle > *{\n    color:#3D3C50;\n}\n\n.check-group{\n    display:flex;\n    flex-flow:row;\n    justify-content:center;\n    align-items:center;\n    color:#727277;\n}\n\n.none-bg{\n    background:none!important;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"},on:{\"click\":function($event){_vm.markLastOpt()}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],staticClass:\"flex-row tbar\"},[_c('img',{attrs:{\"src\":_vm._f(\"img\")(_vm.album.producer.icon)}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.album.close_ad != '1'),expression:\"album.close_ad != '1'\"}]},[_vm._v(_vm._s(_vm.album.producer.username))]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.album.close_ad != '1'),expression:\"album.close_ad != '1'\"}]},[_vm._v(_vm._s(_vm.album.producer.phone))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],staticClass:\"content\",style:({'background-image':'url('+_vm.album.background+')'})},[_c('div',{ref:\"ct\",on:{\"click\":function($event){_vm.menuVisible = !_vm.menuVisible}}},_vm._l((_vm.album.pic),function(pic){return _c('div',{staticClass:\"pic\",style:({'background-image':'url('+pic.url+')'})})}))]),_vm._v(\" \"),(_vm.menu === 'list')?_c('div',{staticClass:\"list menu\"},[_c('div',{staticClass:\"list-cont\"},_vm._l((_vm.album.pic),function(pic,index){return _c('div',{staticClass:\"list-item\",on:{\"click\":function($event){_vm.toPage(index, pic, true)}}},[_c('img',{attrs:{\"src\":pic.thumbnail}}),_vm._v(\" \"),_c('div',{staticClass:\"page-txt\"},[_vm._v(\"\\n                    \"+_vm._s(index + 1)+\"\\n                \")])])}))]):_vm._e(),_vm._v(\" \"),(_vm.menu === 'music')?_c('div',{staticClass:\"xtoggle menu menu-bar\"},[_c('div',{staticClass:\"check-group\"},[_vm._v(\"翻页开关\"),_c('span',{staticClass:\"xcheck\",class:{'active':_vm.pageSwitch},on:{\"click\":function($event){_vm.pageSwitch = !_vm.pageSwitch}}})]),_vm._v(\" \"),_c('div',{staticClass:\"check-group\"},[_vm._v(\"背景开关\"),_c('span',{staticClass:\"xcheck\",class:{'active':_vm.bgSwitch},on:{\"click\":function($event){_vm.bgSwitch = !_vm.bgSwitch}}})])]):_vm._e(),_vm._v(\" \"),(_vm.menu === 'page')?_c('div',{staticClass:\"xpage menu menu-bar\"},[_c('div',{staticClass:\"xpage-icon first\",on:{\"click\":function($event){_vm.toPage(0)}}}),_vm._v(\" \"),_c('div',{staticClass:\"xpage-icon pre\",on:{\"click\":function($event){_vm.toggle(-1)}}}),_vm._v(\" \"),_c('div',{staticClass:\"xpage-txt\"},[_c('span',[_vm._v(_vm._s(_vm.num))]),_c('span',[_vm._v(\"/\")]),_c('span',[_vm._v(_vm._s(_vm.total))])]),_vm._v(\" \"),_c('div',{staticClass:\"xpage-icon next\",on:{\"click\":function($event){_vm.toggle(1)}}}),_vm._v(\" \"),_c('div',{staticClass:\"xpage-icon last\",on:{\"click\":function($event){_vm.toPage(_vm.total - 1)}}})]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menuVisible),expression:\"menuVisible\"}],staticClass:\"flex-row bbar\"},[_c('div',{staticClass:\"bbar-btn\",on:{\"click\":function($event){_vm.active('list')}}},[_c('div',{staticClass:\"icon icon-list\",class:{active: _vm.menu === 'list'}})]),_vm._v(\" \"),_c('div',{staticClass:\"bbar-btn\",on:{\"click\":function($event){_vm.active('page')}}},[_c('div',{staticClass:\"icon icon-page\",class:{active: _vm.menu === 'page'}})]),_vm._v(\" \"),_c('div',{staticClass:\"bbar-btn\",on:{\"click\":function($event){_vm.active('music')}}},[_c('div',{staticClass:\"icon icon-music\",class:{active: _vm.menu === 'music'}})]),_vm._v(\" \"),_c('div',{staticClass:\"bbar-btn\",on:{\"click\":function($event){_vm.play = !_vm.play}}},[_c('div',{staticClass:\"icon icon-play\",class:{active: _vm.play}})])]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('audio',{attrs:{\"src\":_vm.album.music,\"autoplay\":\"true\",\"loop\":\"true\",\"id\":\"audio\"}}),_vm._v(\" \"),_c('audio',{attrs:{\"src\":\"/static/albums/fy.mp3\",\"id\":\"fy\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f33f09aa\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f33f09aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f33f09aa\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}